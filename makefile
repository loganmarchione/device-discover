.PHONY: lint format security test

lint:
	@echo "################################################################################"
	@echo "# ruff check"
	@echo "################################################################################"
	ruff check --diff src tests

	@echo "################################################################################"
	@echo "# ruff format check"
	@echo "################################################################################"
	ruff format --check --diff src tests

format:
	@echo "################################################################################"
	@echo "# ruff check --fix"
	@echo "################################################################################"
	ruff check --fix src tests

	@echo "################################################################################"
	@echo "# ruff format"
	@echo "################################################################################"
	ruff format src tests

security:
	@echo "################################################################################"
	@echo "# bandit"
	@echo "################################################################################"
	bandit -r .

test:
	@echo "################################################################################"
	@echo "# tests"
	@echo "################################################################################"
	PYTHONPATH=. pytest tests/ -s -v

check: lint security test
